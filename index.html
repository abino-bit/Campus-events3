<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muni Campus Event Hub 2025 | Muni University</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="grad s.png" type="grad s.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .shape{
            border-radius: 30%;
            object-fit: cover;
        }
        .circle{
            border-radius: 50%;
            object-fit: cover;
        }

        :root {
            --primary: #ff6347;
            --secondary: orange;
            --accent: #4a6572;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: slategrey;
            color: var(--dark);
            line-height: 1.6;
            background-image: url("background.png");
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: #b3834c;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--primary);
            font-size: 24px;
        }

        .logo h1 {
            color: var(--secondary);
            font-size: 24px;
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }
        .blue{
            background-color: tomato;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a.active {
            color: var(--primary);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #e63c22;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--secondary);
            font-weight: 500;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--secondary);
            color: var(--secondary);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .hero {
            background: linear-gradient(135deg, var(--secondary) 0%, tomato 100%) ;
            color: white;
            padding: 100px 0;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            
        }

        .hero h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.3rem;
            margin: 0 auto 30px;
            max-width: 700px;
            opacity: 0.9;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.8;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 30px;
            margin-bottom: 50px;
        }

        .filters {
            background-color: var(--white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .filters h3 {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-group {
            margin-bottom: 25px;
        }

        .filter-group h4 {
            margin-bottom: 12px;
            font-size: 1rem;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-options label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 5px 0;
            transition: var(--transition);
        }

        .filter-options label:hover {
            color: var(--primary);
        }

        .filter-options input {
            cursor: pointer;
        }

        .events-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .events-header h2 {
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .view-options {
            display: flex;
            gap: 10px;
            background: var(--white);
            padding: 5px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .view-btn {
            background: none;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn.active {
            background-color: var(--secondary);
            color: white;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .event-card {
            background-color: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .event-image {
            height: 180px;
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-size: 4rem;
        }

        .event-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .event-category {
            display: inline-block;
            background-color: #e3f2fd;
            color: var(--secondary);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            font-weight: 500;
            align-self: flex-start;
        }

        .event-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--secondary);
            line-height: 1.3;
        }

        .event-details {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .event-detail {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gray);
            font-size: 0.95rem;
        }

        .event-description {
            margin-bottom: 20px;
            color: var(--dark);
            flex-grow: 1;
        }

        .event-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .rsvp-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rsvp-btn:hover {
            background-color: #e63c22;
            transform: translateY(-2px);
        }

        .rsvp-btn.confirmed {
            background-color: var(--success);
        }

        .event-attendees {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .calendar-view {
            display: none;
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .calendar-header h3 {
            color: var(--secondary);
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .calendar-day {
            min-height: 120px;
            border: 1px solid #eee;
            padding: 10px;
            border-radius: 6px;
            overflow-y: auto;
            transition: var(--transition);
        }

        .calendar-day:hover {
            background-color: #f8f9fa;
        }

        .calendar-day.header {
            background-color: var(--secondary);
            color: white;
            text-align: center;
            font-weight: bold;
            min-height: auto;
            padding: 15px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-day.empty {
            background-color: #f8f9fa;
            border: none;
        }

        .calendar-day.today {
            background-color: rgba(255, 99, 71, 0.1);
            border: 1px solid var(--primary);
        }

        .calendar-event {
            background-color: var(--primary);
            color: white;
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-event:hover {
            opacity: 0.9;
            transform: translateX(3px);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: modalAppear 0.3s ease;
        }

        .modal-wide {
            max-width: 900px;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-header h3 {
            color: var(--secondary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 99, 71, 0.2);
        }

        .backend-panel {
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            display: none;
        }

        .backend-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .backend-header h2 {
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .backend-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .backend-tab {
            background: none;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
            font-weight: 500;
        }

        .backend-tab.active {
            background-color: var(--secondary);
            color: white;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background-color: var(--success);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .live-indicator::before {
            content: '';
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .user-details-modal {
            max-width: 600px;
        }

        .user-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .detail-group {
            margin-bottom: 15px;
        }

        .detail-label {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 5px;
            display: block;
        }

        .detail-value {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid var(--primary);
        }

        .activity-log {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 15px;
        }

        .activity-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-time {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .activity-action {
            font-weight: 500;
        }

        .activity-user {
            color: var(--secondary);
        }

        .real-time-updates {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--secondary);
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .admin-panel {
            display: none;
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .admin-header h2 {
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-stat {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }

        .admin-stat h3 {
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .admin-stat p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .admin-tab {
            background: none;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
            font-weight: 500;
        }

        .admin-tab.active {
            background-color: var(--secondary);
            color: white;
        }

        .admin-table-container {
            overflow-x: auto;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .admin-table th,
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .admin-table th {
            background-color: #f8f9fa;
            color: var(--secondary);
            font-weight: 600;
        }

        .admin-table tr:hover {
            background-color: #f8f9fa;
        }

        .user-role {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .role-admin {
            background-color: #e3f2fd;
            color: var(--secondary);
        }

        .role-student {
            background-color: #e8f5e9;
            color: var(--success);
        }

        .role-club {
            background-color: #fff3e0;
            color: var(--warning);
        }

        .status-active {
            color: var(--success);
            font-weight: 500;
        }

        .status-inactive {
            color: var(--gray);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            padding: 5px;
            border-radius: 4px;
        }

        .edit-btn {
            color: var(--warning);
        }

        .delete-btn {
            color: var(--danger);
        }

        .view-btn-small {
            color: var(--secondary);
        }

        .action-btn:hover {
            background-color: #f8f9fa;
        }

        footer {
            background-color: var(--secondary);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #b3b3b3;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #b3b3b3;
            font-size: 0.9rem;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1001;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero h2 {
                font-size: 2.5rem;
            }
            
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 20px;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="navbar">
                <div class="logo">
                  <img src="muni-logo.png" width="50" length="50" class="circle" >  <h1>Muni Campus Event Hub 2025</h1>
                </div>
                <div class="nav-links">
                    <a href="#" class="active"><i class="fas fa-home"></i> Home</a>
                    <a href="#"><i class="fas fa-calendar"></i> Events</a>
                    <a href="#"><i class="fas fa-users"></i> Communities</a>
                    <a href="#" id="create-event-nav"><i class="fas fa-plus-circle"></i> Create Event</a>
                    <a href="#" id="admin-panel-nav" style="display: none;"><i class="fas fa-cog"></i> Admin</a>
                    <a href="#" id="backend-nav" style="display: none;"><i class="fas fa-database"></i> Backend</a>
                </div>
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-outline" id="login-btn"><i class="fas fa-sign-in-alt"></i> Login</button>
                    <button class="btn btn-primary" id="signup-btn"><i class="fas fa-user-plus"></i> Sign Up</button>
                </div>
                <div class="user-info" id="user-info" style="display: none;">
                    <span id="user-name"></span>
                    <button class="btn btn-outline btn-sm" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                
                </div>
                <img src="muni-logo.png" alt="muni university logo" width="150" height="150" class="shape">
                <h2>Your Campus, Your Events, Your 2025</h2>
                <p>Discover the heartbeat of Muni University. Connect with friends, explore interests, and create memories that last a lifetime.</p>
                <button class="btn btn-primary" id="explore-events-btn"><i class="fas fa-rocket"></i> Explore Events</button>
                
                <div class="hero-stats">
                    <div class="stat">
                        <div class="stat-number">12</div>
                        <div class="stat-label">Events This Month</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">2,847</div>
                        <div class="stat-label">Active Students</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">18</div>
                        <div class="stat-label">Student Clubs</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <!-- Backend Panel (Hidden by default) -->
        <div class="backend-panel" id="backend-panel">
            <div class="backend-header">
                <h2><i class="fas fa-database"></i> Backend System Dashboard <span class="live-indicator">LIVE</span></h2>
                <div>
                    <button class="btn btn-outline" id="refresh-backend"><i class="fas fa-sync-alt"></i> Refresh</button>
                    <button class="btn btn-primary" id="simulate-activity"><i class="fas fa-bolt"></i> Simulate Activity</button>
                    <button class="btn btn-danger" id="backend-logout-btn"><i class="fas fa-sign-out-alt"></i> Backend Logout</button>
                </div>
            </div>
            
            <div class="backend-tabs">
                <button class="backend-tab active" data-tab="users-backend">Users</button>
                <button class="backend-tab" data-tab="activity-backend">Login Activity</button>
                <button class="backend-tab" data-tab="analytics-backend">Analytics</button>
                <button class="backend-tab" data-tab="system-backend">System Info</button>
            </div>
            
            <div id="users-backend" class="backend-tab-content">
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>User ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Registration Date</th>
                                <th>Last Login</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-backend-table-body">
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="activity-backend" class="backend-tab-content" style="display: none;">
                <div class="activity-log" id="activity-log">
                    <!-- Activity items will be populated here -->
                </div>
            </div>
            
            <div id="analytics-backend" class="backend-tab-content" style="display: none;">
                <div class="admin-stats">
                    <div class="admin-stat">
                        <h3 id="total-users-backend">0</h3>
                        <p>Total Users</p>
                    </div>
                    <div class="admin-stat">
                        <h3 id="active-sessions-backend">0</h3>
                        <p>Active Sessions</p>
                    </div>
                    <div class="admin-stat">
                        <h3 id="registrations-today-backend">0</h3>
                        <p>Registrations Today</p>
                    </div>
                    <div class="admin-stat">
                        <h3 id="logins-today-backend">0</h3>
                        <p>Logins Today</p>
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 10px;">User Growth</h3>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div id="user-growth-chart" style="height: 200px; display: flex; align-items: flex-end; gap: 10px;">
                        <!-- Chart bars will be populated here -->
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 10px;">Popular Events</h3>
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Event Name</th>
                                <th>RSVPs</th>
                                <th>Attendees</th>
                                <th>Popularity</th>
                            </tr>
                        </thead>
                        <tbody id="popular-events-table-body">
                            <!-- Popular events will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="system-backend" class="backend-tab-content" style="display: none;">
                <div class="user-details">
                    <div class="detail-group">
                        <span class="detail-label">Server Status</span>
                        <div class="detail-value" style="color: var(--success);">
                            <i class="fas fa-check-circle"></i> Online & Responsive
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Database</span>
                        <div class="detail-value">
                            <i class="fas fa-database"></i> MySQL 8.0
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">API Endpoints</span>
                        <div class="detail-value">
                            <i class="fas fa-code"></i> REST API v2.1
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Uptime</span>
                        <div class="detail-value">
                            <i class="fas fa-clock"></i> 99.8%
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Last Backup</span>
                        <div class="detail-value">
                            <i class="fas fa-save"></i> 2 hours ago
                        </div>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Storage Used</span>
                        <div class="detail-value">
                            <i class="fas fa-hdd"></i> 245 MB / 1 GB
                        </div>
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 10px;">API Endpoints</h3>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <div class="detail-label">GET /api/users</div>
                            <div class="detail-value">Retrieve all users</div>
                        </div>
                        <div>
                            <div class="detail-label">POST /api/users</div>
                            <div class="detail-value">Create new user</div>
                        </div>
                        <div>
                            <div class="detail-label">GET /api/events</div>
                            <div class="detail-value">Retrieve all events</div>
                        </div>
                        <div>
                            <div class="detail-label">POST /api/events</div>
                            <div class="detail-value">Create new event</div>
                        </div>
                        <div>
                            <div class="detail-label">GET /api/analytics</div>
                            <div class="detail-value">Get system analytics</div>
                        </div>
                        <div>
                            <div class="detail-label">POST /api/auth/login</div>
                            <div class="detail-value">User authentication</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel (Hidden by default) -->
        <div class="admin-panel" id="admin-panel">
            <div class="admin-header">
                <h2><i class="fas fa-cog"></i> Admin Dashboard</h2>
                <div>
                    <button class="btn btn-outline" id="refresh-admin"><i class="fas fa-sync-alt"></i> Refresh</button>
                    <button class="btn btn-danger" id="admin-logout-btn"><i class="fas fa-sign-out-alt"></i> Admin Logout</button>
                </div>
            </div>
            
            <div class="admin-stats">
                <div class="admin-stat">
                    <h3 id="total-users">0</h3>
                    <p>Total Users</p>
                </div>
                <div class="admin-stat">
                    <h3 id="active-users">0</h3>
                    <p>Active Today</p>
                </div>
                <div class="admin-stat">
                    <h3 id="new-registrations">0</h3>
                    <p>New This Week</p>
                </div>
                <div class="admin-stat">
                    <h3 id="total-logins">0</h3>
                    <p>Total Logins</p>
                </div>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="users">Users</button>
                <button class="admin-tab" data-tab="activity">Login Activity</button>
                <button class="admin-tab" data-tab="events">Event Analytics</button>
            </div>
            
            <div class="admin-table-container">
                <table class="admin-table" id="users-table">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Registration Date</th>
                            <th>Last Login</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
                
                <table class="admin-table" id="activity-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>User</th>
                            <th>Action</th>
                            <th>IP Address</th>
                            <th>Device</th>
                        </tr>
                    </thead>
                    <tbody id="activity-table-body">
                        <!-- Activity will be populated here -->
                    </tbody>
                </table>
                
                <table class="admin-table" id="events-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>Event Name</th>
                            <th>Organizer</th>
                            <th>Date</th>
                            <th>Attendees</th>
                            <th>RSVPs</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="events-table-body">
                        <!-- Events will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="main-content">
            <!-- Filters Section -->
            <aside class="filters">
                <h3><i class="fas fa-filter"></i> Filter Events</h3>
                
                <div class="filter-group">
                    <h4><i class="fas fa-tags"></i> Category</h4>
                    <div class="filter-options">
                        <label>
                            <input type="checkbox" id="filter-all" checked> All Events
                        </label>
                        <label>
                            <input type="checkbox" class="category-filter" value="academic"> Academic & Learning
                        </label>
                        <label>
                            <input type="checkbox" class="category-filter" value="social"> Social & Networking
                        </label>
                        <label>
                            <input type="checkbox" class="category-filter" value="sports"> Sports & Wellness
                        </label>
                        <label>
                            <input type="checkbox" class="category-filter" value="arts"> Arts & Culture
                        </label>
                        <label>
                            <input type="checkbox" class="category-filter" value="career"> Career Development
                        </label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h4><i class="far fa-calendar"></i> Date</h4>
                    <div class="filter-options">
                        <label>
                            <input type="radio" name="date" value="all" checked> Any Date
                        </label>
                        <label>
                            <input type="radio" name="date" value="week"> This Week
                        </label>
                        <label>
                            <input type="radio" name="date" value="month"> This Month
                        </label>
                        <label>
                            <input type="radio" name="date" value="next-month"> Next Month
                        </label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h4><i class="fas fa-map-marker-alt"></i> Location</h4>
                    <div class="filter-options">
                        <label>
                            <input type="checkbox" class="location-filter" value="all" checked> Any Location
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni Main Campus"> Muni Main Campus
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni Campus Ark"> Muni Campus Ark
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni Conference hall"> Muni Conference hall
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni Graduation square"> Muni Graduation square
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni University play grounds"> Muni University play grounds
                        </label>
                        <label>
                            <input type="checkbox" class="location-filter" value="Muni Campus canteen"> Muni Campus Canteen
                        </label>
                    </div>
                </div>
                
                <button class="btn btn-secondary" id="apply-filters" style="width: 100%;"><i class="fas fa-check"></i> Apply Filters</button>
            </aside>

            <!-- Events Section -->
            <main class="events">
                <div class="events-header">
                    <h2><i class="fas fa-calendar-day"></i> Upcoming Events</h2>
                    <div class="view-options">
                        <button class="view-btn active" id="list-view">
                            <i class="fas fa-list"></i> List
                        </button>
                        <button class="view-btn" id="calendar-view-btn">
                            <i class="fas fa-calendar"></i> Calendar
                        </button>
                    </div>
                </div>

                <!-- Events Grid View -->
                <div class="events-grid" id="events-grid">
                    <!-- Event cards will be dynamically inserted here -->
                </div>

                <!-- Calendar View -->
                <div class="calendar-view" id="calendar-view">
                    <div class="calendar-header">
                        <h3><i class="fas fa-calendar-alt"></i> October 2025</h3>
                        <div class="calendar-nav">
                            <button class="btn btn-outline" id="prev-month">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="btn btn-outline" id="next-month">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendar-grid">
                        <!-- Calendar days will be dynamically inserted here -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Real-time Updates Indicator -->
    <div class="real-time-updates" id="real-time-updates" style="display: none;">
        <i class="fas fa-bell"></i>
        <span id="update-message">New user registered</span>
    </div>

    <!-- User Details Modal -->
    <div class="modal" id="user-details-modal">
        <div class="modal-content user-details-modal">
            <div class="modal-header">
                <h3><i class="fas fa-user"></i> User Details</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="user-details-content">
                <!-- User details will be populated here -->
            </div>
            <button class="btn btn-primary" id="close-user-details" style="width: 100%; margin-top: 20px;">
                <i class="fas fa-times"></i> Close
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sign-in-alt"></i> Login to Your Account</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
            <p style="text-align: center; margin-top: 20px;">
                Don't have an account? <a href="#" id="switch-to-signup" style="color: var(--primary);">Sign up here</a>
            </p>
            <p style="text-align: center; margin-top: 10px;">
                <small><a href="#" id="admin-login" style="color: var(--gray);">Admin Access</a></small>
            </p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signup-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Create Your Account</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" class="form-control" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" class="form-control" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" class="form-control" placeholder="Create a password" required>
                </div>
                <div class="form-group">
                    <label for="signup-confirm">Confirm Password</label>
                    <input type="password" id="signup-confirm" class="form-control" placeholder="Confirm your password" required>
                </div>
                <div class="form-group">
                    <label for="signup-role">Account Type</label>
                    <select id="signup-role" class="form-control" required>
                        <option value="">Select account type</option>
                        <option value="student">Student</option>
                        <option value="club">Club/Organization</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
            </form>
            <p style="text-align: center; margin-top: 20px;">
                Already have an account? <a href="#" id="switch-to-login" style="color: var(--primary);">Login here</a>
            </p>
        </div>
    </div>

    <!-- Create Event Modal -->
    <div class="modal" id="create-event-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus-circle"></i> Create New Event</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="event-form">
                <div class="form-group">
                    <label for="event-title">Event Title</label>
                    <input type="text" id="event-title" class="form-control" placeholder="What's happening?">
                </div>
                <div class="form-group">
                    <label for="event-date">Date & Time</label>
                    <input type="datetime-local" id="event-date" class="form-control">
                </div>
                <div class="form-group">
                    <label for="event-location">Location</label>
                    <input type="text" id="event-location" class="form-control" placeholder="Where is it happening?">
                </div>
                <div class="form-group">
                    <label for="event-category">Category</label>
                    <select id="event-category" class="form-control">
                        <option value="">Select a category</option>
                        <option value="academic">Academic & Learning</option>
                        <option value="social">Social & Networking</option>
                        <option value="sports">Sports & Wellness</option>
                        <option value="arts">Arts & Culture</option>
                        <option value="career">Career Development</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="event-description">Description</label>
                    <textarea id="event-description" class="form-control" rows="4" placeholder="Tell us more about your event..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-calendar-plus"></i> Create Event
                </button>
            </form>
        </div>
    </div>

    <!-- RSVP Confirmation Modal -->
    <div class="modal" id="rsvp-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> You're In!</h3>
                <button class="close-modal">&times;</button>
            </div>
            <p id="rsvp-message">You've successfully RSVP'd for this event. We're excited to see you there!</p>
            <button class="btn btn-primary" id="close-rsvp-modal" style="width: 100%;">
                <i class="fas fa-thumbs-up"></i> Awesome!
            </button>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal" id="admin-login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-shield"></i> Admin Access</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-username">Username</label>
                    <input type="text" id="admin-username" class="form-control" placeholder="Enter admin username" required>
                </div>
                <div class="form-group">
                    <label for="admin-password">Password</label>
                    <input type="password" id="admin-password" class="form-control" placeholder="Enter admin password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Access Admin Panel
                </button>
            </form>
            <p style="text-align: center; margin-top: 20px;">
                <small>For presentation purposes only</small>
            </p>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="edit-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit User</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="edit-user-form">
                <input type="hidden" id="edit-user-id">
                <div class="form-group">
                    <label for="edit-user-name">Full Name</label>
                    <input type="text" id="edit-user-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="edit-user-email">Email</label>
                    <input type="email" id="edit-user-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="edit-user-role">Role</label>
                    <select id="edit-user-role" class="form-control" required>
                        <option value="student">Student</option>
                        <option value="club">Club/Organization</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-user-status">Status</label>
                    <select id="edit-user-status" class="form-control" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Event added successfully!</span>
    </div>

    <!-- Footer -->
    <footer class="blue">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3><i class="fas fa-calendar-alt"></i> Campus Event Hub</h3>
                    <p>Your central platform for discovering and creating campus events at Muni University. Making 2025 the most memorable year yet.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3><i class="fas fa-link"></i> Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-arrow-right"></i> All Events</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> Calendar View</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> My RSVPs</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> Create Event</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3><i class="fas fa-hands-helping"></i> Resources</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-arrow-right"></i> Student Clubs</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> University Departments</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> Event Guidelines</a></li>
                        <li><a href="#"><i class="fas fa-arrow-right"></i> FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3><i class="fas fa-envelope"></i> Contact Us</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-envelope"></i> events@muni.edu</a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> (123) 456-7890</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> Student Union Building</a></li>
                        <li><a href="#"><i class="fas fa-clock"></i> Mon-Fri: 9AM-5PM</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Muni University Campus Event Hub. Crafted with <i class="fas fa-heart" style="color: var(--primary);"></i> for students, by students.</p>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Backend Simulation System
        class BackendSystem {
            constructor() {
                this.key = 'campusHubBackendData';
                this.activityCallbacks = [];
                this.init();
            }
            
            init() {
                if (!localStorage.getItem(this.key)) {
                    const initialData = {
                        users: [
                            {
                                id: 1,
                                name: "Admin User",
                                email: "admin@muni.edu",
                                password: "admin2025",
                                role: "admin",
                                registrationDate: new Date().toISOString(),
                                lastLogin: new Date().toISOString(),
                                status: "active",
                                loginCount: 12,
                                lastIp: "192.168.1.1",
                                userAgent: "Chrome/Windows"
                            },
                            {
                                id: 2,
                                name: "John Student",
                                email: "john@student.muni.edu",
                                password: "password123",
                                role: "student",
                                registrationDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                                lastLogin: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                                status: "active",
                                loginCount: 5,
                                lastIp: "192.168.1.100",
                                userAgent: "Firefox/Windows"
                            },
                            {
                                id: 3,
                                name: "Tech Club",
                                email: "techclub@muni.edu",
                                password: "password123",
                                role: "club",
                                registrationDate: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString(),
                                lastLogin: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                                status: "active",
                                loginCount: 8,
                                lastIp: "192.168.1.150",
                                userAgent: "Safari/Mac"
                            }
                        ],
                        loginActivity: [
                            {
                                id: 1,
                                timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                                userName: "John Student",
                                userEmail: "john@student.muni.edu",
                                action: "Login",
                                ip: "192.168.1.100",
                                device: "Chrome/Windows",
                                status: "success"
                            },
                            {
                                id: 2,
                                timestamp: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                                userName: "Tech Club",
                                userEmail: "techclub@muni.edu",
                                action: "Login",
                                ip: "192.168.1.150",
                                device: "Firefox/Mac",
                                status: "success"
                            },
                            {
                                id: 3,
                                timestamp: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                                userName: "Admin User",
                                userEmail: "admin@muni.edu",
                                action: "Login",
                                ip: "192.168.1.1",
                                device: "Chrome/Windows",
                                status: "success"
                            }
                        ],
                        analytics: {
                            totalLogins: 25,
                            registrationsToday: 0,
                            loginsToday: 0,
                            activeSessions: 0
                        }
                    };
                    this.save(initialData);
                }
                
                // Start simulating background activity
                this.startActivitySimulation();
            }
            
            get() {
                const data = localStorage.getItem(this.key);
                return data ? JSON.parse(data) : { users: [], loginActivity: [], analytics: {} };
            }
            
            save(data) {
                localStorage.setItem(this.key, JSON.stringify(data));
                
                // Notify subscribers of data changes
                this.activityCallbacks.forEach(callback => {
                    callback(data);
                });
            }
            
            addUser(user) {
                const data = this.get();
                user.id = Date.now();
                user.registrationDate = new Date().toISOString();
                user.status = "active";
                user.loginCount = 0;
                user.lastIp = "192.168.1.1";
                user.userAgent = "Chrome/Windows";
                
                data.users.push(user);
                
                // Update analytics
                data.analytics.registrationsToday += 1;
                
                this.save(data);
                
                // Log registration activity
                this.addActivity({
                    userName: user.name,
                    userEmail: user.email,
                    action: "Registration",
                    ip: user.lastIp,
                    device: user.userAgent,
                    status: "success"
                });
                
                return user;
            }
            
            updateUser(userId, updates) {
                const data = this.get();
                const userIndex = data.users.findIndex(u => u.id === userId);
                if (userIndex !== -1) {
                    data.users[userIndex] = { ...data.users[userIndex], ...updates };
                    this.save(data);
                    return data.users[userIndex];
                }
                return null;
            }
            
            deleteUser(userId) {
                const data = this.get();
                data.users = data.users.filter(u => u.id !== userId);
                this.save(data);
            }
            
            addActivity(activity) {
                const data = this.get();
                activity.id = Date.now();
                activity.timestamp = new Date().toISOString();
                data.loginActivity.unshift(activity);
                
                // Update analytics for login activities
                if (activity.action === "Login") {
                    data.analytics.loginsToday += 1;
                    data.analytics.totalLogins += 1;
                    
                    // Update user login count
                    const user = data.users.find(u => u.email === activity.userEmail);
                    if (user) {
                        user.loginCount += 1;
                        user.lastLogin = activity.timestamp;
                        user.lastIp = activity.ip;
                        user.userAgent = activity.device;
                    }
                }
                
                this.save(data);
                
                // Show real-time update
                this.showRealTimeUpdate(`${activity.userName} ${activity.action.toLowerCase()}ed`);
                
                return activity;
            }
            
            findUserByEmail(email) {
                const data = this.get();
                return data.users.find(u => u.email === email);
            }
            
            getAllUsers() {
                return this.get().users;
            }
            
            getAllLoginActivity() {
                return this.get().loginActivity;
            }
            
            getAnalytics() {
                return this.get().analytics;
            }
            
            // Subscribe to data changes
            onDataChange(callback) {
                this.activityCallbacks.push(callback);
            }
            
            // Show real-time update notification
            showRealTimeUpdate(message) {
                const updateEl = document.getElementById('real-time-updates');
                const messageEl = document.getElementById('update-message');
                
                if (updateEl && messageEl) {
                    messageEl.textContent = message;
                    updateEl.style.display = 'flex';
                    
                    setTimeout(() => {
                        updateEl.style.display = 'none';
                    }, 3000);
                }
            }
            
            // Simulate background user activity
            startActivitySimulation() {
                setInterval(() => {
                    // Randomly simulate user activity
                    if (Math.random() > 0.7) {
                        const actions = ['Login', 'Logout', 'View Events', 'RSVP to Event'];
                        const randomAction = actions[Math.floor(Math.random() * actions.length)];
                        
                        const users = this.getAllUsers();
                        if (users.length > 0) {
                            const randomUser = users[Math.floor(Math.random() * users.length)];
                            
                            this.addActivity({
                                userName: randomUser.name,
                                userEmail: randomUser.email,
                                action: randomAction,
                                ip: `192.168.1.${Math.floor(Math.random() * 255)}`,
                                device: Math.random() > 0.5 ? 'Chrome/Windows' : 'Safari/Mac',
                                status: "success"
                            });
                        }
                    }
                }, 10000); // Every 10 seconds
            }
            
            // Simulate a burst of activity for demo purposes
            simulateActivity() {
                const actions = ['Login', 'Logout', 'View Events', 'RSVP to Event', 'Create Event'];
                const users = this.getAllUsers();
                
                // Simulate 5-10 random activities
                const activityCount = Math.floor(Math.random() * 6) + 5;
                
                for (let i = 0; i < activityCount; i++) {
                    setTimeout(() => {
                        const randomUser = users[Math.floor(Math.random() * users.length)];
                        const randomAction = actions[Math.floor(Math.random() * actions.length)];
                        
                        this.addActivity({
                            userName: randomUser.name,
                            userEmail: randomUser.email,
                            action: randomAction,
                            ip: `192.168.1.${Math.floor(Math.random() * 255)}`,
                            device: Math.random() > 0.5 ? 'Chrome/Windows' : 'Safari/Mac',
                            status: "success"
                        });
                    }, i * 500);
                }
            }
        }

        // Initialize the enhanced backend system
        const backendSystem = new BackendSystem();

        // Update the existing SharedStorage class to use the backend system
        class SharedStorage {
            constructor() {
                this.backend = backendSystem;
            }
            
            addUser(user) {
                return this.backend.addUser(user);
            }
            
            updateUser(userId, updates) {
                return this.backend.updateUser(userId, updates);
            }
            
            deleteUser(userId) {
                this.backend.deleteUser(userId);
            }
            
            addLoginActivity(activity) {
                return this.backend.addActivity(activity);
            }
            
            findUserByEmail(email) {
                return this.backend.findUserByEmail(email);
            }
            
            getAllUsers() {
                return this.backend.getAllUsers();
            }
            
            getAllLoginActivity() {
                return this.backend.getAllLoginActivity();
            }
        }

        // Initialize shared storage with backend
        const sharedStorage = new SharedStorage();

        // Sample event data for 2025
        const events = [
            {
                id: 1,
                title: "Freshers Ball 2025",
                date: "2025-11-15T19:00:00",
                location: "Campus Conference Hall",
                category: "social",
                description: "Welcome to Muni University! Join us for an unforgettable night of music, dancing, and fun as we kick off the academic year. Dress to impress and get ready to make new friends!",
                attendees: 320,
                image: "",
                organizer: "Student Guild"
            },
            {
                id: 2,
                title: "Vice Chancellor's Assembly",
                date: "2025-11-20T10:00:00",
                location: "Campus Main Hall",
                category: "academic",
                description: "An important address from our Vice Chancellor on the university's vision, achievements, and exciting plans for the 2025 academic year. All students are encouraged to attend.",
                attendees: 450,
                image: "",
                organizer: "Muni Dean of Students"
            },
            {
                id: 3,
                title: "New Student Orientation",
                date: "2025-11-05T09:00:00",
                location: "Campus Main Hall",
                category: "academic",
                description: "Essential information session for all new students. Learn about campus resources, academic expectations, and how to make the most of your university experience.",
                attendees: 600,
                image: "",
                organizer: "Dean of Students"
            },
            {
                id: 4,
                title: "Football Tournament",
                date: "2025-11-12T14:00:00",
                location: "Muni University Play Grounds",
                category: "sports",
                description: "Annual inter-college football tournament open to all students. Form your team and compete for the championship trophy and bragging rights!",
                attendees: 120,
                image: "",
                organizer: "Sports Department"
            },
            {
                id: 5,
                title: "Muni Chess Games Qualifiers",
                date: "2025-11-08T18:00:00",
                location: "Muni Campus Canteen",
                category: "sports",
                description: "In preparation for the national chess games",
                attendees: 85,
                image: "",
                organizer: "Muni Chess Club"
            },
            {
                id: 6,
                title: "Career Fair 2025",
                date: "2025-11-05T10:00:00",
                location: "Campus Main Hall",
                category: "career",
                description: "Connect with top employers offering internships and full-time positions. Perfect opportunity to network and explore career paths. Bring your resume!",
                attendees: 350,
                image: "",
                organizer: "Career Services"
            },
            {
                id: 7,
                title: "Python Bootcamp",
                date: "2025-11-25T09:00:00",
                location: "Muni University Incubation Center",
                category: "academic",
                description: "Presentations and discussions on cutting-edge research and innovations in technology. Featuring guest speakers from industry leaders.",
                attendees: 180,
                image: "",
                organizer: "PyLadies Kampala"
            },
            {
                id: 8,
                title: "Graduation Ceremony",
                date: "2025-11-18T16:00:00",
                location: "Graduation Square",
                category: "academic",
                description: "A day of celebrating HEC, undergraduates, Post graduates students who have successfully achieved their awards for their respective programs",
                attendees: 220,
                image: "",
                organizer: "University Council"
            },
            {
                id: 9,
                title: "Wellness & Mindfulness Workshop",
                date: "2025-11-30T15:00:00",
                location: "Wellness Center",
                category: "sports",
                description: "Learn practical techniques for managing stress and improving mental wellbeing. Perfect for the busy student life.",
                attendees: 65,
                image: "",
                organizer: "Health Services"
            },
            {
                id: 10,
                title: "Sustainable Campus Initiative Launch",
                date: "2025-11-10T11:00:00",
                location: "Environmental Science Building",
                category: "academic",
                description: "Join the launch of our new sustainability initiative. Learn how you can contribute to making our campus greener and more eco-friendly.",
                attendees: 95,
                image: "",
                organizer: "Environmental Club"
            }
        ];

        let users = sharedStorage.getAllUsers();
        let loginActivity = sharedStorage.getAllLoginActivity();
        let currentUser = null;
        let isAdmin = false;
        let isBackendUser = false;

        // DOM Elements
        const eventsGrid = document.getElementById('events-grid');
        const calendarView = document.getElementById('calendar-view');
        const calendarGrid = document.getElementById('calendar-grid');
        const listViewBtn = document.getElementById('list-view');
        const calendarViewBtn = document.getElementById('calendar-view-btn');
        const createEventModal = document.getElementById('create-event-modal');
        const loginModal = document.getElementById('login-modal');
        const signupModal = document.getElementById('signup-modal');
        const adminLoginModal = document.getElementById('admin-login-modal');
        const editUserModal = document.getElementById('edit-user-modal');
        const rsvpModal = document.getElementById('rsvp-modal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const closeRsvpModal = document.getElementById('close-rsvp-modal');
        const eventForm = document.getElementById('event-form');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const adminLoginForm = document.getElementById('admin-login-form');
        const editUserForm = document.getElementById('edit-user-form');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notification-text');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const adminLogoutBtn = document.getElementById('admin-logout-btn');
        const exploreEventsBtn = document.getElementById('explore-events-btn');
        const createEventNav = document.getElementById('create-event-nav');
        const adminPanelNav = document.getElementById('admin-panel-nav');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const filterAll = document.getElementById('filter-all');
        const categoryFilters = document.querySelectorAll('.category-filter');
        const locationFilters = document.querySelectorAll('.location-filter');
        const dateFilters = document.querySelectorAll('input[name="date"]');
        const switchToSignup = document.getElementById('switch-to-signup');
        const switchToLogin = document.getElementById('switch-to-login');
        const adminLoginLink = document.getElementById('admin-login');
        const adminPanel = document.getElementById('admin-panel');
        const refreshAdminBtn = document.getElementById('refresh-admin');
        const adminTabs = document.querySelectorAll('.admin-tab');
        const usersTable = document.getElementById('users-table');
        const activityTable = document.getElementById('activity-table');
        const eventsTable = document.getElementById('events-table');
        const usersTableBody = document.getElementById('users-table-body');
        const activityTableBody = document.getElementById('activity-table-body');
        const eventsTableBody = document.getElementById('events-table-body');
        const totalUsersEl = document.getElementById('total-users');
        const activeUsersEl = document.getElementById('active-users');
        const newRegistrationsEl = document.getElementById('new-registrations');
        const totalLoginsEl = document.getElementById('total-logins');
        const authButtons = document.getElementById('auth-buttons');
        const userInfo = document.getElementById('user-info');
        const userName = document.getElementById('user-name');

        // Backend-specific DOM elements
        const backendPanel = document.getElementById('backend-panel');
        const backendNav = document.getElementById('backend-nav');
        const refreshBackendBtn = document.getElementById('refresh-backend');
        const simulateActivityBtn = document.getElementById('simulate-activity');
        const backendLogoutBtn = document.getElementById('backend-logout-btn');
        const backendTabs = document.querySelectorAll('.backend-tab');
        const realTimeUpdates = document.getElementById('real-time-updates');
        const userDetailsModal = document.getElementById('user-details-modal');
        const userDetailsContent = document.getElementById('user-details-content');
        const closeUserDetailsBtn = document.getElementById('close-user-details');

        // Filter state
        const filterState = {
            categories: [],
            locations: [],
            date: 'all'
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            renderEvents();
            renderCalendar();
            setupEventListeners();
            updateAdminStats();
            
            // Show a welcome notification
            showNotification('Welcome to Campus Event Hub 2025!');
            
            // Check if admin is already logged in
            checkAdminStatus();
            
            // Check if user is already logged in
            checkUserStatus();
            
            // Check if backend user is already logged in
            checkBackendStatus();
            
            // Set up backend data change listener
            backendSystem.onDataChange((data) => {
                if (isBackendUser) {
                    updateBackendPanel();
                }
            });
        });

        // Render events in grid view
        function renderEvents(filteredEvents = events) {
            eventsGrid.innerHTML = '';
            
            if (filteredEvents.length === 0) {
                eventsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <i class="fas fa-calendar-times" style="font-size: 3rem; color: var(--gray); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--gray);">No events found</h3>
                        <p>Try adjusting your filters or check back later for new events.</p>
                    </div>
                `;
                return;
            }
            
            filteredEvents.forEach(event => {
                const eventDate = new Date(event.date);
                const formattedDate = eventDate.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric',
                    year: 'numeric'
                });
                const formattedTime = eventDate.toLocaleTimeString('en-US', { 
                    hour: 'numeric', 
                    minute: '2-digit'
                });
                
                const eventCard = document.createElement('div');
                eventCard.className = 'event-card';
                eventCard.innerHTML = `
                    <div class="event-image">
                        <span style="font-size: 4rem;">${event.image}</span>
                    </div>
                    <div class="event-content">
                        <span class="event-category">${getCategoryName(event.category)}</span>
                        <h3 class="event-title">${event.title}</h3>
                        <div class="event-details">
                            <div class="event-detail">
                                <i class="far fa-calendar"></i>
                                <span>${formattedDate}</span>
                            </div>
                            <div class="event-detail">
                                <i class="far fa-clock"></i>
                                <span>${formattedTime}</span>
                            </div>
                            <div class="event-detail">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${event.location}</span>
                            </div>
                            <div class="event-detail">
                                <i class="fas fa-user-friends"></i>
                                <span>Hosted by ${event.organizer}</span>
                            </div>
                        </div>
                        <p class="event-description">${event.description}</p>
                        <div class="event-actions">
                            <button class="rsvp-btn" data-event-id="${event.id}">
                                <i class="fas fa-user-plus"></i> RSVP
                            </button>
                            <div class="event-attendees">
                                <i class="fas fa-users"></i>
                                <span>${event.attendees} attending</span>
                            </div>
                        </div>
                    </div>
                `;
                
                eventsGrid.appendChild(eventCard);
            });
            
            // Add event listeners to RSVP buttons
            document.querySelectorAll('.rsvp-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const eventId = this.getAttribute('data-event-id');
                    rsvpToEvent(eventId);
                });
            });
        }

        // Render calendar view for October 2025
        function renderCalendar() {
            calendarGrid.innerHTML = '';
            
            // Create day headers
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day header';
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });
            
            // October 2025 starts on Wednesday (0=Sun, 1=Mon, 2=Tue, 3=Wed)
            // Create empty days for October 2025 (starts on Wednesday)
            for (let i = 0; i < 3; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Create days for October 2025
            const today = new Date();
            for (let day = 1; day <= 31; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                // Check if this is today (for demo purposes, we'll highlight Oct 15)
                if (day === 15) {
                    dayElement.classList.add('today');
                }
                
                dayElement.innerHTML = `<div style="font-weight: bold; margin-bottom: 5px;">${day}</div>`;
                
                // Add events to calendar days
                events.forEach(event => {
                    const eventDate = new Date(event.date);
                    if (eventDate.getDate() === day && eventDate.getMonth() === 9) { // October is month 9 (0-indexed)
                        const eventElement = document.createElement('div');
                        eventElement.className = 'calendar-event';
                        eventElement.textContent = event.title;
                        eventElement.setAttribute('data-event-id', event.id);
                        dayElement.appendChild(eventElement);
                    }
                });
                
                calendarGrid.appendChild(dayElement);
            }
        }

        // Get category name from category code
        function getCategoryName(category) {
            const categories = {
                'academic': 'Academic & Learning',
                'social': 'Social & Networking',
                'sports': 'Sports & Wellness',
                'arts': 'Arts & Culture',
                'career': 'Career Development'
            };
            return categories[category] || 'Event';
        }

        // RSVP to an event
        function rsvpToEvent(eventId) {
            const event = events.find(e => e.id == eventId);
            if (event) {
                // Update attendee count
                event.attendees += 1;
                
                // Update the UI
                renderEvents();
                
                // Show confirmation modal
                const rsvpMessage = document.getElementById('rsvp-message');
                rsvpMessage.textContent = `You've successfully RSVP'd for "${event.title}"! We're excited to see you there.`;
                rsvpModal.style.display = 'flex';
                
                // Show notification
                showNotification(`You're attending ${event.title}!`);
            }
        }

        // Apply filters to events
        function applyFilters() {
            let filteredEvents = [...events];
            
            // Filter by category
            if (filterState.categories.length > 0) {
                filteredEvents = filteredEvents.filter(event => 
                    filterState.categories.includes(event.category)
                );
            }
            
            // Filter by location
            if (filterState.locations.length > 0) {
                filteredEvents = filteredEvents.filter(event => 
                    filterState.locations.includes(event.location)
                );
            }
            
            // Filter by date
            const now = new Date();
            switch(filterState.date) {
                case 'week':
                    const nextWeek = new Date(now);
                    nextWeek.setDate(now.getDate() + 7);
                    filteredEvents = filteredEvents.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate >= now && eventDate <= nextWeek;
                    });
                    break;
                case 'month':
                    const nextMonth = new Date(now);
                    nextMonth.setMonth(now.getMonth() + 1);
                    filteredEvents = filteredEvents.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate >= now && eventDate <= nextMonth;
                    });
                    break;
                case 'next-month':
                    const startNextMonth = new Date(now);
                    startNextMonth.setMonth(now.getMonth() + 1);
                    startNextMonth.setDate(1);
                    const endNextMonth = new Date(startNextMonth);
                    endNextMonth.setMonth(startNextMonth.getMonth() + 1);
                    filteredEvents = filteredEvents.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate >= startNextMonth && eventDate < endNextMonth;
                    });
                    break;
                // 'all' case - no date filtering needed
            }
            
            renderEvents(filteredEvents);
            showNotification(`Found ${filteredEvents.length} events matching your criteria`);
        }

        // Show notification
        function showNotification(message, type = 'success') {
            notificationText.textContent = message;
            
            // Read CSS variables from :root
            const rootStyles = getComputedStyle(document.documentElement);
            const dangerColor = (rootStyles.getPropertyValue('--danger') || '#dc3545').trim();
            const warningColor = (rootStyles.getPropertyValue('--warning') || '#ffc107').trim();
            const successColor = (rootStyles.getPropertyValue('--success') || '#28a745').trim();
            const darkColor = (rootStyles.getPropertyValue('--dark') || '#343a40').trim();
            
            // Change color based on type
            if (type === 'error') {
                notification.style.backgroundColor = dangerColor;
                notification.style.color = 'white';
            } else if (type === 'warning') {
                notification.style.backgroundColor = warningColor;
                notification.style.color = darkColor;
            } else {
                notification.style.backgroundColor = successColor;
                notification.style.color = 'white';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Check admin status
        function checkAdminStatus() {
            const adminStatus = localStorage.getItem('campusHubAdmin');
            if (adminStatus === 'true') {
                isAdmin = true;
                adminPanelNav.style.display = 'block';
                adminPanel.style.display = 'block';
                updateAdminPanel();
            }
        }

        // Check user status
        function checkUserStatus() {
            const userStatus = localStorage.getItem('campusHubCurrentUser');
            if (userStatus) {
                currentUser = JSON.parse(userStatus);
                updateUserUI();
            }
        }

        // Check backend status
        function checkBackendStatus() {
            const backendStatus = localStorage.getItem('campusHubBackend');
            if (backendStatus === 'true') {
                isBackendUser = true;
                backendNav.style.display = 'block';
                backendPanel.style.display = 'block';
                updateBackendPanel();
            }
        }

        // Update user UI
        function updateUserUI() {
            if (currentUser) {
                authButtons.style.display = 'none';
                userInfo.style.display = 'flex';
                userName.textContent = currentUser.name;
            } else {
                authButtons.style.display = 'flex';
                userInfo.style.display = 'none';
            }
        }

        // Update admin panel statistics
        function updateAdminStats() {
            // Refresh data from shared storage
            users = sharedStorage.getAllUsers();
            loginActivity = sharedStorage.getAllLoginActivity();
            
            const totalUsers = users.length;
            const today = new Date().toDateString();
            const activeUsers = loginActivity.filter(activity => 
                new Date(activity.timestamp).toDateString() === today
            ).length;
            
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const newRegistrations = users.filter(user => 
                new Date(user.registrationDate) >= weekAgo
            ).length;
            
            const totalLogins = loginActivity.length;
            
            totalUsersEl.textContent = totalUsers;
            activeUsersEl.textContent = activeUsers;
            newRegistrationsEl.textContent = newRegistrations;
            totalLoginsEl.textContent = totalLogins;
        }

        // Update admin panel tables
        function updateAdminPanel() {
            updateAdminStats();
            
            // Users table
            usersTableBody.innerHTML = '';
            users.forEach(user => {
                const row = document.createElement('tr');
                const lastLogin = user.lastLogin ? new Date(user.lastLogin).toLocaleString() : 'Never';
                const statusClass = user.lastLogin && (new Date() - new Date(user.lastLogin)) < 7 * 24 * 60 * 60 * 1000 ? 'status-active' : 'status-inactive';
                const statusText = user.lastLogin && (new Date() - new Date(user.lastLogin)) < 7 * 24 * 60 * 60 * 1000 ? 'Active' : 'Inactive';
                
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td><span class="user-role role-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</span></td>
                    <td>${new Date(user.registrationDate).toLocaleDateString()}</td>
                    <td>${lastLogin}</td>
                    <td class="${statusClass}">${statusText}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit-btn" title="Edit User" data-user-id="${user.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete-btn" title="Delete User" data-user-id="${user.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                usersTableBody.appendChild(row);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const userId = parseInt(this.getAttribute('data-user-id'));
                    editUser(userId);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const userId = parseInt(this.getAttribute('data-user-id'));
                    deleteUser(userId);
                });
            });
            
            // Activity table
            activityTableBody.innerHTML = '';
            const sortedActivity = [...loginActivity].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            sortedActivity.forEach(activity => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${new Date(activity.timestamp).toLocaleString()}</td>
                    <td>${activity.userName} (${activity.userEmail})</td>
                    <td>${activity.action}</td>
                    <td>${activity.ip || '192.168.1.1'}</td>
                    <td>${activity.device || 'Chrome/Windows'}</td>
                `;
                activityTableBody.appendChild(row);
            });
            
            // Events table
            eventsTableBody.innerHTML = '';
            events.forEach(event => {
                const row = document.createElement('tr');
                const eventDate = new Date(event.date);
                const status = eventDate > new Date() ? 'Upcoming' : 'Completed';
                const statusClass = eventDate > new Date() ? 'status-active' : 'status-inactive';
                
                row.innerHTML = `
                    <td>${event.title}</td>
                    <td>${event.organizer}</td>
                    <td>${eventDate.toLocaleDateString()}</td>
                    <td>${event.attendees}</td>
                    <td>${Math.floor(event.attendees * 0.8)}</td>
                    <td class="${statusClass}">${status}</td>
                `;
                eventsTableBody.appendChild(row);
            });
        }

        // Update backend panel
        function updateBackendPanel() {
            // Update users table
            const usersBackendTableBody = document.getElementById('users-backend-table-body');
            usersBackendTableBody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                const lastLogin = user.lastLogin ? new Date(user.lastLogin).toLocaleString() : 'Never';
                const statusClass = user.status === 'active' ? 'status-active' : 'status-inactive';
                
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td><span class="user-role role-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</span></td>
                    <td>${new Date(user.registrationDate).toLocaleDateString()}</td>
                    <td>${lastLogin}</td>
                    <td class="${statusClass}">${user.status}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view-btn-small" title="View Details" data-user-id="${user.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn edit-btn" title="Edit User" data-user-id="${user.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete-btn" title="Delete User" data-user-id="${user.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                usersBackendTableBody.appendChild(row);
            });
            
            // Update activity log
            const activityLog = document.getElementById('activity-log');
            activityLog.innerHTML = '';
            
            const sortedActivity = [...loginActivity].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            sortedActivity.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                activityItem.innerHTML = `
                    <div>
                        <div class="activity-action">${activity.action}</div>
                        <div class="activity-user">${activity.userName} (${activity.userEmail})</div>
                    </div>
                    <div class="activity-time">${new Date(activity.timestamp).toLocaleString()}</div>
                `;
                activityLog.appendChild(activityItem);
            });
            
            // Update analytics
            const analytics = backendSystem.getAnalytics();
            document.getElementById('total-users-backend').textContent = users.length;
            document.getElementById('active-sessions-backend').textContent = analytics.activeSessions;
            document.getElementById('registrations-today-backend').textContent = analytics.registrationsToday;
            document.getElementById('logins-today-backend').textContent = analytics.loginsToday;
            
            // Update user growth chart
            updateUserGrowthChart();
            
            // Update popular events
            updatePopularEvents();
        }

        // Update user growth chart
        function updateUserGrowthChart() {
            const chart = document.getElementById('user-growth-chart');
            chart.innerHTML = '';
            
            // Generate random growth data for the last 7 days
            let cumulativeUsers = users.length - 10; // Start with a lower number
            if (cumulativeUsers < 0) cumulativeUsers = 0;
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                
                // Random growth for each day
                const dailyGrowth = Math.floor(Math.random() * 5);
                cumulativeUsers += dailyGrowth;
                
                const barHeight = (cumulativeUsers / users.length) * 100;
                if (barHeight > 100) barHeight = 100;
                
                const bar = document.createElement('div');
                bar.style.cssText = `
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                `;
                
                bar.innerHTML = `
                    <div style="height: ${barHeight}%; width: 30px; background-color: var(--primary); border-radius: 4px 4px 0 0;"></div>
                    <div style="margin-top: 5px; font-size: 0.8rem;">${dayName}</div>
                    <div style="font-size: 0.7rem; color: var(--gray);">${cumulativeUsers}</div>
                `;
                
                chart.appendChild(bar);
            }
        }

        // Update popular events
        function updatePopularEvents() {
            const popularEventsTableBody = document.getElementById('popular-events-table-body');
            popularEventsTableBody.innerHTML = '';
            
            // Sort events by attendees (descending)
            const sortedEvents = [...events].sort((a, b) => b.attendees - a.attendees).slice(0, 5);
            
            sortedEvents.forEach(event => {
                const row = document.createElement('tr');
                const popularity = Math.min(100, Math.floor((event.attendees / 500) * 100));
                
                row.innerHTML = `
                    <td>${event.title}</td>
                    <td>${event.attendees}</td>
                    <td>${Math.floor(event.attendees * 0.8)}</td>
                    <td>
                        <div style="background: #e9ecef; border-radius: 4px; height: 8px; width: 100%;">
                            <div style="background: var(--primary); height: 100%; width: ${popularity}%; border-radius: 4px;"></div>
                        </div>
                        <div style="text-align: center; font-size: 0.8rem; margin-top: 5px;">${popularity}%</div>
                    </td>
                `;
                popularEventsTableBody.appendChild(row);
            });
        }

        // View user details
        function viewUserDetails(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                userDetailsContent.innerHTML = `
                    <div class="user-details">
                        <div class="detail-group">
                            <span class="detail-label">User ID</span>
                            <div class="detail-value">${user.id}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Full Name</span>
                            <div class="detail-value">${user.name}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Email</span>
                            <div class="detail-value">${user.email}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Role</span>
                            <div class="detail-value">${user.role}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Registration Date</span>
                            <div class="detail-value">${new Date(user.registrationDate).toLocaleString()}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Last Login</span>
                            <div class="detail-value">${user.lastLogin ? new Date(user.lastLogin).toLocaleString() : 'Never'}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Login Count</span>
                            <div class="detail-value">${user.loginCount || 0}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Last IP</span>
                            <div class="detail-value">${user.lastIp || 'N/A'}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">User Agent</span>
                            <div class="detail-value">${user.userAgent || 'N/A'}</div>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Status</span>
                            <div class="detail-value ${user.status === 'active' ? 'status-active' : 'status-inactive'}">${user.status}</div>
                        </div>
                    </div>
                `;
                
                userDetailsModal.style.display = 'flex';
            }
        }

        // Edit user function
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                document.getElementById('edit-user-id').value = user.id;
                document.getElementById('edit-user-name').value = user.name;
                document.getElementById('edit-user-email').value = user.email;
                document.getElementById('edit-user-role').value = user.role;
                document.getElementById('edit-user-status').value = user.status || 'active';
                
                editUserModal.style.display = 'flex';
            }
        }

        // Delete user function
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                sharedStorage.deleteUser(userId);
                updateAdminPanel();
                updateBackendPanel();
                showNotification('User deleted successfully!');
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            localStorage.removeItem('campusHubCurrentUser');
            updateUserUI();
            showNotification('You have been logged out successfully.');
        }

        // Admin logout function
        function adminLogout() {
            isAdmin = false;
            localStorage.removeItem('campusHubAdmin');
            adminPanelNav.style.display = 'none';
            adminPanel.style.display = 'none';
            showNotification('Admin logged out successfully.');
        }

        // Backend login function
        function backendLogin() {
            isBackendUser = true;
            localStorage.setItem('campusHubBackend', 'true');
            backendNav.style.display = 'block';
            backendPanel.style.display = 'block';
            updateBackendPanel();
            showNotification('Backend access granted!');
        }

        // Backend logout function
        function backendLogout() {
            isBackendUser = false;
            localStorage.removeItem('campusHubBackend');
            backendNav.style.display = 'none';
            backendPanel.style.display = 'none';
            showNotification('Backend logged out successfully.');
        }

        // Setup event listeners
        function setupEventListeners() {
            // View toggle
            listViewBtn.addEventListener('click', function() {
                listViewBtn.classList.add('active');
                calendarViewBtn.classList.remove('active');
                eventsGrid.style.display = 'grid';
                calendarView.style.display = 'none';
            });
            
            calendarViewBtn.addEventListener('click', function() {
                calendarViewBtn.classList.add('active');
                listViewBtn.classList.remove('active');
                calendarView.style.display = 'block';
                eventsGrid.style.display = 'none';
            });
            
            // Modal close buttons
            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    createEventModal.style.display = 'none';
                    loginModal.style.display = 'none';
                    signupModal.style.display = 'none';
                    rsvpModal.style.display = 'none';
                    adminLoginModal.style.display = 'none';
                    editUserModal.style.display = 'none';
                    userDetailsModal.style.display = 'none';
                });
            });
            
            closeRsvpModal.addEventListener('click', function() {
                rsvpModal.style.display = 'none';
            });
            
            closeUserDetailsBtn.addEventListener('click', function() {
                userDetailsModal.style.display = 'none';
            });
            
            // Auth buttons
            loginBtn.addEventListener('click', function() {
                loginModal.style.display = 'flex';
            });
            
            signupBtn.addEventListener('click', function() {
                signupModal.style.display = 'flex';
            });
            
            // Logout buttons
            logoutBtn.addEventListener('click', logout);
            adminLogoutBtn.addEventListener('click', adminLogout);
            backendLogoutBtn.addEventListener('click', backendLogout);
            
            exploreEventsBtn.addEventListener('click', function() {
                document.querySelector('.events').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Switch between login and signup
            switchToSignup.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.style.display = 'none';
                signupModal.style.display = 'flex';
            });
            
            switchToLogin.addEventListener('click', function(e) {
                e.preventDefault();
                signupModal.style.display = 'none';
                loginModal.style.display = 'flex';
            });
            
            // Admin login
            adminLoginLink.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.style.display = 'none';
                adminLoginModal.style.display = 'flex';
            });
            
            // Create event form
            eventForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // In a real app, you would send this data to a server
                const newEvent = {
                    id: events.length + 1,
                    title: document.getElementById('event-title').value,
                    date: document.getElementById('event-date').value,
                    location: document.getElementById('event-location').value,
                    category: document.getElementById('event-category').value,
                    description: document.getElementById('event-description').value,
                    attendees: 0,
                    image: "",
                    organizer: currentUser ? currentUser.name : "You"
                };
                
                events.unshift(newEvent);
                renderEvents();
                
                // Show success message
                showNotification('Your event was created successfully!');
                
                createEventModal.style.display = 'none';
                eventForm.reset();
                
                // Switch to list view to see the new event
                listViewBtn.click();
            });
            
            // Login form
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                // Use shared storage to find user
                const user = sharedStorage.findUserByEmail(email);
                if (user && user.password === password) {
                    // Update last login
                    sharedStorage.updateUser(user.id, { lastLogin: new Date().toISOString() });
                    
                    // Record login activity
                    const loginRecord = {
                        timestamp: new Date().toISOString(),
                        userName: user.name,
                        userEmail: user.email,
                        action: 'Login',
                        ip: '192.168.1.1',
                        device: 'Chrome/Windows'
                    };
                    sharedStorage.addLoginActivity(loginRecord);
                    
                    currentUser = user;
                    localStorage.setItem('campusHubCurrentUser', JSON.stringify(currentUser));
                    showNotification(`Welcome back, ${user.name}!`);
                    loginModal.style.display = 'none';
                    loginForm.reset();
                    updateUserUI();
                    
                    // Update admin panel if visible
                    if (isAdmin) {
                        updateAdminPanel();
                    }
                    
                    // Update backend panel if visible
                    if (isBackendUser) {
                        updateBackendPanel();
                    }
                } else {
                    showNotification('Invalid email or password. Please try again.', 'error');
                }
            });
            
            // Signup form - Now uses shared storage
            signupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('signup-name').value;
                const email = document.getElementById('signup-email').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm').value;
                const role = document.getElementById('signup-role').value;
                
                // Simple validation
                if (password !== confirmPassword) {
                    showNotification('Passwords do not match. Please try again.', 'error');
                    return;
                }
                
                if (sharedStorage.findUserByEmail(email)) {
                    showNotification('An account with this email already exists.', 'error');
                    return;
                }
                
                // Create new user using shared storage
                const newUser = {
                    name: name,
                    email: email,
                    password: password,
                    role: role,
                    lastLogin: null
                };
                
                const createdUser = sharedStorage.addUser(newUser);
                
                // Record registration activity
                const registerRecord = {
                    timestamp: new Date().toISOString(),
                    userName: name,
                    userEmail: email,
                    action: 'Registration',
                    ip: '192.168.1.1',
                    device: 'Chrome/Windows'
                };
                sharedStorage.addLoginActivity(registerRecord);
                
                showNotification('Account created successfully! Welcome to Campus Event Hub.');
                signupModal.style.display = 'none';
                signupForm.reset();
                
                // Auto-login the new user
                currentUser = createdUser;
                localStorage.setItem('campusHubCurrentUser', JSON.stringify(currentUser));
                updateUserUI();
                
                // Update admin panel if admin is logged in
                if (isAdmin) {
                    updateAdminPanel();
                }
                
                // Update backend panel if backend user is logged in
                if (isBackendUser) {
                    updateBackendPanel();
                }
            });
            
            // Admin login form
            adminLoginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                // Simple admin authentication (for demo purposes)
                if (username === 'admin' && password === 'admin2025') {
                    isAdmin = true;
                    localStorage.setItem('campusHubAdmin', 'true');
                    adminPanelNav.style.display = 'block';
                    adminPanel.style.display = 'block';
                    updateAdminPanel();
                    showNotification('Admin access granted!');
                    adminLoginModal.style.display = 'none';
                    adminLoginForm.reset();
                    
                    // Also grant backend access
                    backendLogin();
                } else {
                    showNotification('Invalid admin credentials. Please try again.', 'error');
                }
            });
            
            // Edit user form
            editUserForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const userId = parseInt(document.getElementById('edit-user-id').value);
                const userName = document.getElementById('edit-user-name').value;
                const userEmail = document.getElementById('edit-user-email').value;
                const userRole = document.getElementById('edit-user-role').value;
                const userStatus = document.getElementById('edit-user-status').value;
                
                const updates = {
                    name: userName,
                    email: userEmail,
                    role: userRole,
                    status: userStatus
                };
                
                sharedStorage.updateUser(userId, updates);
                updateAdminPanel();
                updateBackendPanel();
                showNotification('User updated successfully!');
                editUserModal.style.display = 'none';
            });
            
            // Create Event button in nav
            createEventNav.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentUser) {
                    createEventModal.style.display = 'flex';
                } else {
                    showNotification('Please log in to create events.', 'warning');
                    loginModal.style.display = 'flex';
                }
            });
            
            // Admin panel navigation
            adminPanelNav.addEventListener('click', function(e) {
                e.preventDefault();
                adminPanel.style.display = adminPanel.style.display === 'none' ? 'block' : 'none';
                if (adminPanel.style.display === 'block') {
                    updateAdminPanel();
                }
            });
            
            // Backend navigation
            backendNav.addEventListener('click', function(e) {
                e.preventDefault();
                backendPanel.style.display = backendPanel.style.display === 'none' ? 'block' : 'none';
                if (backendPanel.style.display === 'block') {
                    updateBackendPanel();
                }
            });
            
            // Refresh admin panel
            refreshAdminBtn.addEventListener('click', function() {
                // Reload data from shared storage
                updateAdminPanel();
                showNotification('Admin panel refreshed!');
            });
            
            // Refresh backend
            refreshBackendBtn.addEventListener('click', function() {
                // Reload data from backend
                users = sharedStorage.getAllUsers();
                loginActivity = sharedStorage.getAllLoginActivity();
                updateBackendPanel();
                showNotification('Backend data refreshed!');
            });
            
            // Simulate activity
            simulateActivityBtn.addEventListener('click', function() {
                backendSystem.simulateActivity();
                showNotification('Simulating user activity...');
            });
            
            // Admin tabs
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    adminTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show corresponding table
                    const tabName = this.getAttribute('data-tab');
                    usersTable.style.display = tabName === 'users' ? 'table' : 'none';
                    activityTable.style.display = tabName === 'activity' ? 'table' : 'none';
                    eventsTable.style.display = tabName === 'events' ? 'table' : 'none';
                });
            });
            
            // Backend tabs
            backendTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    backendTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const tabName = this.getAttribute('data-tab');
                    document.querySelectorAll('.backend-tab-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(tabName).style.display = 'block';
                });
            });
            
            // View user details buttons (delegated event listener)
            document.addEventListener('click', function(e) {
                if (e.target.closest('.view-btn-small')) {
                    const userId = parseInt(e.target.closest('.view-btn-small').getAttribute('data-user-id'));
                    viewUserDetails(userId);
                }
            });
            
            // Filter functionality
            applyFiltersBtn.addEventListener('click', applyFilters);
            
            // Category filter changes
            filterAll.addEventListener('change', function() {
                if (this.checked) {
                    categoryFilters.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    filterState.categories = [];
                }
            });
            
            categoryFilters.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        filterAll.checked = false;
                        filterState.categories.push(this.value);
                    } else {
                        filterState.categories = filterState.categories.filter(cat => cat !== this.value);
                    }
                });
            });
            
            // Location filter changes
            locationFilters.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.value === 'all' && this.checked) {
                        // If "Any Location" is checked, uncheck others
                        locationFilters.forEach(cb => {
                            if (cb.value !== 'all') cb.checked = false;
                        });
                        filterState.locations = [];
                    } else if (this.checked) {
                        // If a specific location is checked, uncheck "Any Location"
                        document.querySelector('.location-filter[value="all"]').checked = false;
                        filterState.locations.push(this.value);
                    } else {
                        filterState.locations = filterState.locations.filter(loc => loc !== this.value);
                    }
                });
            });
            
            // Date filter changes
            dateFilters.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked) {
                        filterState.date = this.value;
                    }
                });
            });
            
            // Clicking outside modal closes it
            window.addEventListener('click', function(e) {
                if (e.target === createEventModal) {
                    createEventModal.style.display = 'none';
                }
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (e.target === signupModal) {
                    signupModal.style.display = 'none';
                }
                if (e.target === adminLoginModal) {
                    adminLoginModal.style.display = 'none';
                }
                if (e.target === editUserModal) {
                    editUserModal.style.display = 'none';
                }
                if (e.target === rsvpModal) {
                    rsvpModal.style.display = 'none';
                }
                if (e.target === userDetailsModal) {
                    userDetailsModal.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>